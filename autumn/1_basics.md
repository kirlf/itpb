# Основы языка C: переменные, функции, циклы, условия, структуры, компиляция 
  
## Зачем нужно изучать язык C? 

Язык С (Си) - это один из языков программирования, наиболее подходящих для создания производительных (то есть быстрых) приложений.  

**C** занимает, своего рода, пограничную позицию:  

- данный язык достаточно легко понимаем для человека (в сравнении с ассемблером и машинным кодом), и поэтому на нем относительно легко писать объемные программы за относительно короткий срок,  
- и при этом созданный на его основе код наиболее быстро обрабатывается компьютером.  

Умение писать программы на данном языке - один из востребованных навыков в сфере телекоммуникаций. 
Более того, язык С – это прообраз большинства популярных языков программирования таких, как C++, Java и C# (собственно, поэтому их и называют С-подобными).  Очень полезно знать, что находится под "капотом" большинства программных продуктов современности, и язык С - это прекрасный повод поговорить о таких темах, как типизация, организация памяти, указатели и т.д.  

## Основная литература 

Стандартом де-факто для языка С является книга от его же создателей: 

> Керниган, Б. and Ритчи, Д., 2007. [Язык программирования Си= The C programming language](http://dushanov.narod.ru/books/c/C-ru.pdf).—2-е изд. М.: Вильямс, p.304.) 
> Ritchie, D.M. and Kernighan, B.W., 1998. [The C Programming Language](http://www2.cs.uregina.ca/~hilder/cs833/Other%20Reference%20Materials/The%20C%20Programming%20Language.pdf). Prentice Hall; 2 edition (April 1, 1988). 

Далее по тексту мы будем несколько раз обращаться к ней через обозначение [Керниган, Ричи], чтобы адресовать читателя к той или иной главе для более подробного изучения. 

## Необходимое и достаточное для простейшей программы 

Несколько важных моментов, которые нужно знать на старте: 

1. Минимальная программа на С должна состоять из функции следующего вида: 

```c 
int main() 
{ 
  return 0; 
} 
``` 

Пожалуйста, не забывайте об этом. О том, что именно составляет данный минимум мы поговорим чуть позже.  

2. В конце каждой строки должен стоять знак точки с запятой `;`. 

Иначе программа не скомпилируется (о процедуре компилиции будет сказано ниже). 

3. Знаки табуляции не обязательны. 

Однако, считается хорошим тоном повышать с помощью них читаемость вашего кода. 

> Более подробные рекомендации по форматированию кода см. по следующей ссылке: ["8. Форматирование Вашего исходного кода." (OpenNet)](http://www.opennet.ru/docs/RUS/coding_standard/standard-8.html) 

4. В коде можно писать комментарии: 

```c 
int main() 
{ 
  // Однострочный комментарий 
  /* Многострочный 
  комментарий */  
  return 0; 
} 
``` 

Комментарии не учитываются компьютером при компиляции или исполнении программы, они нужны для программистов. 

## Переменные 

Для того, чтобы изучить какой-либо язык программирования, нужно писать на нем программы. Предлагаю написать какую-нибудь простую: 

```c 
int main() 
{ 
  int a = 2; 
  int b = 3; 
  int c = a + b; 
} 
``` 

Теперь проговорим сделанное: 

1. Мы задали несколько переменных: `int a`, `int b` и `int c`. 

Язык C - это язык со **статической типизацией**, а значит тип данных указывается в явном виде перед названием переменной. В нашем случае, это `int` - целочисленное значение. Тип данных говорит компьютеру сколько **байт** он должен выделить в своей памяти для хранения той или иной переменной. Статическая типизация ускоряет работу программ.  

> Кстати, очень красочно про переменные (на примере языка Java) рассказывается в данном учебном материале: ["Элли, переменные и их типы" (javarush.ru)](https://javarush.ru/quests/lectures/questsyntax.level00.lecture04). Советую прочитать. 

Названия других типов данных, а также размер занимаемой ими памяти вы можете найти в данной таблице: ["Система типов Си: Базовые типы"](https://ru.wikipedia.org/wiki/%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D1%82%D0%B8%D0%BF%D0%BE%D0%B2_%D0%A1%D0%B8#%D0%91%D0%B0%D0%B7%D0%BE%D0%B2%D1%8B%D0%B5_%D1%82%D0%B8%D0%BF%D1%8B). 

**[Керниган, Ричи]**: 
- "2.1 Имена переменных"; 
- "2.2 Типы данных и их размеры"; 
- "2.4 Объявления". 

2. Двум из них мы присвоили целочисленные значения. 

Знак `=` означает в языке С (и в большинстве других языков программирования) присвоение значения. Для проверки равенства двух переменных используется оператор `==`. 

**[Керниган, Ричи]**: 
- "2.6 Операции отношения и логические операции"; 
- "2.10 Операции присваивания и выражения с ними"; 
- "А.7.10 Операция проверки равенства"; 
- "А.7.17 Выражения с присваиванием".  

3. Третьей переменной присвоили результат арифметического сложения двух других. 

**[Керниган, Ричи]**:: 
- "1.2 Переменные и арифметические операции"; 
- "2.5 Арифметические операции". 

В целом, ничего сложного, главное привыкнуть. Помните, имена переменных не должны пересекаться в рамках одной области видимости (ниже об этом буде чуть подробнее).  

## Функции  

Теперь давайте обсуди, что такое ```int main()```.  

В ходе написания кода довольно удобно выносить некоторые участки кода в "черные ящики", которыми можно пользоваться, не задумываясь об их наполнении. Роль таких "черных ящиков" в рамках языка С играют **функции**. 

**[Керниган, Ричи]**:: 
- "1.7 Функции"; 
- "1.8 Аргументы: передача по значению". 

Итак: 
- функции начинаются с типа данных возвращаемого значения;  
- имеют имя, заканчивающееся круглыми скобками,  
- и тело (код, который выполняет функция), заключенное в фигурные скобки.  

В нашем примере выше функция была одна - ```int main()```. Она возвращала целое число (```return 0```) и это условность языка С, что ```main``` всегда должна быть и должна возвращать целочисленное значение. 

Однако, можно писать и другие функции, в сколь угодном количестве.  

![](https://habrastorage.org/webt/up/6w/o6/up6wo6jrex32tcnkunrwcba34rg.png) 

*Рис. 1. Иллюстрация функций языка С.*  

Функция может ничего не возвращать, но тогда типом данных перед названием такой функции должен быть ```void``` ("пустота"). 

Все переменные, объявленные внутри функции, являются **локальными**, их область видимости - функция, в которой они были объявлены, то есть другие функции не видят данные переменные и не могут производить с ними никаких действий.  

![](https://habrastorage.org/webt/vi/_0/l0/vi_0l0buex1rxmu9v03z-bvf-yy.png) 

*Рис. 2. Иллюстрация глобальной и локальной переменной.*  

**[Керниган, Ричи]**: 
- "1.10 Внешние переменные"; 
- "4.5 Правила, определяющие область действия"; 
- "4.6 Статические переменные". 

После завершения работы функции все память, содержащая её локальные переменные и не определенные в *куче* (об этом см. [второй семинар](https://github.com/kirlf/itpb/blob/master/autumn/2_pointers.md)), автоматически очищается.  

Кстати, как вы могли заметить, в примерах на рисунках 1 и 2 мы использовали несколько новых инструментов. 

Во-первых, мы подключили необходимую нам библиотеку с помощью ```#include```. Дело в том, что очень много полезных функций (и других элементов, которые можно написать на С) уже написано до нас и разложено по разным "сборникам подпрограмм" - библиотекам. В данном случаем мы подключили заголовочный файл ```stdio.h``` ("standard input-output"), входящий в стандартную библиотеку. Сделали мы это для того, чтобы пользоваться стандартными инструментами ввода и вывода. 

А, во-вторых, мы, собственно, и воспользовались одним из инструментов вывода - функцией [```printf```](https://linux.die.net/man/3/printf). 

**[Керниган, Ричи]**: 
- "4.5 Заголовочные файлы"; 
- "4.11 Препроцессор С"; 
- "7.1 Стандартные средства ввода-вывода"; 
- "7.8 Форматированный вывод и функция printf"; 
- "Б.1 Ввод-вывод: <stdio.h>". 

## Циклы 

Иным способом сделать вашу программу более компактной является использование **циклов**. Это самый простой способ быстро описать некоторое количество одинаковых операций, которые если между собой и отличаются, то незначительно. Самыми популярными циклами являются: 

- цикл с предусловием ```while``` 

```c 
int i = 0; 
while (i < 10)  
{ 
  printf("%d\n", i); 
  i++; 
} 
``` 

- цикл со счетчиком ```for``` 

``` 
for (<инициализация>; <условие продолжения>; <изменение счётчика>) 
{ 
    <тело цикла> 
} 
``` 

![](https://habrastorage.org/webt/pi/dc/x2/pidcx2wcided2trgugp3_zcpmxw.png) 

*Рис. 3. Иллюстрация цикла for.* 

Если цикл ```for``` нужно прервать при наступлении какого-то условия, используют оператор **break**. Если при наступлении какого-то условия нужно перейти на следующую итерацию, то используют оператор **continue**. 

**[Керниган, Ричи]**: 
- "1.3 Оператор for"; 
- "2.8 Операция инкрементирования и декрементирования"; 
- "3.5 Циклы while и for"; 
- "3.7 Операторы break и continue" 

## Условные операторы 

Иногда программе нужно задать несколько вариантов развития событий. В этом программисту помогают условные операторы **if-else**. 

![](https://habrastorage.org/webt/id/vk/qs/idvkqsghu2mz-xj0_5flxztfdxs.png) 

*Рис. 4. Иллюстрация применения условных операторов.* 

Еще одним удобным способом ветвления условий при их относительно небольшом количестве является оператор **switch-case**: 

```switch (<переменная>)  
{ 
    case <значение 1>: 
        <ветвь 1> 
    [case <значение 2>: 
        <ветвь 2>] 
    [default: 
        <действия по умолчанию>] 
} 
``` 

Например, у нас есть целые числа и мы хотим вывести на экран названия дней недели, которые им соответствуют. Код для этой операции будет выглядеть следующим образом: 

``` c 
#include<conio.h> 
#include<stdio.h> 
  
int main()  
{ 
    unsigned day; 
    printf("Enter day "); 
    scanf("%d", &day); 
 
    if (day > 7) { 
        day = day % 7; 
    } 

    switch (day) { 
    case 0: 
        printf("Sunday"); 
    case 1: 
        printf("Monday"); 
    case 2: 
        printf("Tuesday"); 
    case 3: 
        printf("Wednesday"); 
    case 4: 
        printf("Thursday"); 
    case 5: 
        printf("Friday"); 
    default: 
        printf("Saturday"); 
    } 
} 
```

Конструкция `switch-case` присутствует во многих С-подобных языках, однако в каких-то языках может быть и не реализована (например, в языке Python).

**[Керниган, Ричи]**: 

- "2.6 Операции отношения и логические операции"; 
- "3.2 Оператор if-else"; 
- "3.4 Оператор switch"; 
- "А.7.14 Операция логического И"; 
- "А.7.15 Операция логического ИЛИ".  

## Структуры 

Иногда для удобства обращения переменные удобно группировать под одним именем. В языке С для этого существуют **структуры**: 

``` 
struct ярлык  
{ 
    тип имя переменной; 
    тип имя переменной; 
    тип имя переменной; 
} структурные переменные; 
``` 

Ключевым словом для объявления структур является ```struct```; далее следует ярлык (то есть название структуры); в фигурных скобках описываются входящие в структуру переменные; далее можно (но не обязательно) объявить структурные переменные; заканчиваться конструкция должна обязательно точкой с запятой.  

Рассмотрим небольшой пример. Допустим, мы хотим описать точку в декартовом пространстве. Структура, описывающая такую точку будет выглядеть следующим образом: 

![](https://habrastorage.org/webt/vx/ku/ka/vxkukay9pwylttvz74oes1ss4wg.png) 

*Рис. 5. Пример структуры, описывающей точку в пространстве.* 

Структуры могут содержать любые типы данных, в том числе и другие структуры. Например, если мы хоти описать прямоугольник, логично, что мы будем использовать абстракцию точки. 

![](https://habrastorage.org/webt/za/br/np/zabrnp8c1ykf0c2dcqzt-wjwabo.png) 

*Рис. 6. Пример структуры, описывающей прямоугольник в декартовой системе координат.* 

Обратите внимание, как в данном случае происходит объявление переменной: 

``` 
struct <название структуры> <имя переменной>; 
``` 

Обратиться к полям структуры можно через **указатели** (о них см. [второй семинар](https://github.com/kirlf/itpb/blob/master/autumn/2_pointers.md)) или **напрямую** через знак точки: 

```c 
int main() 
{ 
  struct point 
  { 
    int x; 
    int y; 
  }; 
  struct point p1; 
  p1.x = 3; 
  p1.y = 4; 
return 0; 
} 
``` 

Кстати, структуры - это основа для многих не входящих в базовые, абстрактных типов данных. Например, связных списков (см. третий семинар). 

**[Керниган, Ричи]**: 

- "6.1 Основы работы со структурами"; 
- "6.2 Структуры и функции"; 
- "6.7 Определение новых типов". 

## Компиляция программ 

Для того, чтобы запустить программу, написанную на языке С, нужно её сначала скомпилировать. 

Для иллюстрации предлагаю ознакомиться со следующей "вырезкой" (рис. 1) из книги *Гриффитс, Гриффитс: [Изучаем программирование на C](https://yadi.sk/i/xKGX0B04AKLNtA)* (советуем к ознакомлению). 

<img src="https://habrastorage.org/webt/lu/yr/1a/luyr1aehrxerllynlysahn5lbeq.png" width="700"/> 

*Рис. 7. Иллюстрация процесса компиляции. [2, c. 38]* 

Процесс компиляции нужно осуществлять в командной строке компьютера: 

```sh 
$ <название компилятора> <исходный код> -o <имя исполняемого файла> 
``` 

Например так: 

```sh 
$ gcc source_code.c -o execute_file 
``` 

Чтобы запустить исполняемый файл в командной строке, достаточно указать его имя (ниже пример для Unix-подобных систем): 

```sh 
$ ./execute_file 
``` 

Если файлов с исходным кодом становится слишком много, то часто используют, так называемые, *make-файлы*. Более подробно можно прочитать здесь: ["Makefile для самых маленьких"](https://habr.com/ru/post/155201/). Но это уже совсем другая история... 

# Список использованной литературы 

1. Керниган, Б. and Ритчи, Д., 2007. [Язык программирования Си= The C programming language](http://dushanov.narod.ru/books/c/C-ru.pdf).—2-е изд. М.: Вильямс, p.304. 

2. Гриффитс, Гриффитс: Изучаем программирование на C, - М. Эксмо, 2013. 

3. Клеменс Бен, [Язык С в XXI веке](http://orkish5.tplinkdns.com:8080/books/C;C++/%D0%AF%D0%B7%D1%8B%D0%BA%20%D0%A1%20%D0%B2%20XXI%20%D0%B2%D0%B5%D0%BA%D0%B5.pdf) / Пep. с англ. А. А. Слинкина. - М.: ДМК Пресс, 2015. - 376 с.: ил. 
